(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0146fb29"],{"0b02":function(t,e,a){},"7abe":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-container"},[t.tableData?a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"index",label:"序号",align:"center",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}],null,!1,3056706777)}),a("el-table-column",{attrs:{prop:"title",label:"标题",align:"center",width:"180"}}),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"中图预览"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px"},attrs:{src:t.getImgSrc(e.row.midImg),fit:"fill"}})]}}],null,!1,1400190597)}),a("el-table-column",{attrs:{prop:"address",align:"center",label:"大图预览"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px"},attrs:{src:t.getImgSrc(e.row.bigImg),fit:"fill"}})]}}],null,!1,1756991305)}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"操作","hide-after":2e3,placement:"top"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",circle:""},on:{click:function(a){return t.handleDialog(e.row)}}})],1)]}}],null,!1,2833341209)})],1):t._e(),a("el-dialog",{attrs:{title:"请编辑信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"首页中图"}},[a("Upload",{model:{value:t.form.midImg,callback:function(e){t.$set(t.form,"midImg",e)},expression:"form.midImg"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"首页中图"}},[a("Upload",{model:{value:t.form.bigImg,callback:function(e){t.$set(t.form,"bigImg",e)},expression:"form.bigImg"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editConfirm}},[t._v("确 定")])],1)],1)],1)},n=[],l=a("5530"),i=a("1da1"),o=(a("d81d"),a("96cf"),a("b775"));function s(){return Object(o["a"])({url:"/api/banner",method:"get"})}function c(t){return Object(o["a"])({url:"/api/banner",method:"post",data:t})}var u=a("c7f0"),d={name:"index",data:function(){return{dialogTableVisible:!1,dialogFormVisible:!1,tableData:[],form:{title:"",description:"",midImg:"",bigImg:""}}},components:{Upload:u["a"]},methods:{fetchBanner:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:a=e.sent,t.tableData=a.data;case 4:case"end":return e.stop()}}),e)})))()},getImgSrc:function(t){return Object({NODE_ENV:"production",VUE_APP_BASE_API:"/prod-api",BASE_URL:"/"}).VUE_APP_SEVER+t},handleDialog:function(t){this.form=Object(l["a"])({},t),this.dialogFormVisible=!0},editConfirm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.form),a=t.tableData.map((function(e){return e.id===t.form.id?t.form:e})),e.next=4,c(a);case 4:r=e.sent,t.tableData=r.data,t.dialogFormVisible=!1,t.$message.success("修改成功");case 8:case"end":return e.stop()}}),e)})))()}},created:function(){this.fetchBanner()}},m=d,f=a("2877"),p=Object(f["a"])(m,r,n,!1,null,"69d44e16",null);e["default"]=p.exports},b3de:function(t,e,a){"use strict";a("0b02")},c7f0:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"block"},[t._v(t._s(t.title))]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/upload","show-file-list":!1,"on-success":t.handleAvatarSuccess,headers:t.headers}},[t.value?a("img",{staticClass:"avatar",attrs:{src:t.getImgSrc(t.value)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)},n=[],l=a("5f87"),i={name:"index",props:["title","value"],computed:{headers:function(){return{Authorization:"Bearer "+Object(l["a"])()}}},methods:{handleAvatarSuccess:function(t){this.$emit("input",t.data)},getImgSrc:function(t){return Object({NODE_ENV:"production",VUE_APP_BASE_API:"/prod-api",BASE_URL:"/"}).VUE_APP_SEVER+t}}},o=i,s=(a("b3de"),a("2877")),c=Object(s["a"])(o,r,n,!1,null,"00d5206b",null);e["a"]=c.exports}}]);